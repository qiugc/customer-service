<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹è¯•ç”¨ä¾‹ç®¡ç†ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .nav-menu {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 25px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .nav-link:hover {
            background: rgba(255,255,255,0.2);
            border-color: rgba(255,255,255,0.6);
            transform: translateY(-2px);
        }

        .nav-link.active {
            background: rgba(255,255,255,0.2);
            border-color: rgba(255,255,255,0.8);
        }

        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }

        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            color: #6c757d;
            transition: all 0.3s ease;
        }

        .nav-tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }

        .nav-tab:hover {
            background: #e9ecef;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .btn-info {
            background: #17a2b8;
            color: white;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
        }

        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .progress {
            background-color: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-bar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
            border-left: 4px solid #667eea;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #6c757d;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .alert {
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid transparent;
            border-radius: 8px;
        }

        .alert-success {
            color: #155724;
            background-color: #d4edda;
            border-color: #c3e6cb;
        }

        .alert-info {
            color: #0c5460;
            background-color: #d1ecf1;
            border-color: #bee5eb;
        }

        .alert-warning {
            color: #856404;
            background-color: #fff3cd;
            border-color: #ffeaa7;
        }

        .alert-danger {
            color: #721c24;
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }

        .table th,
        .table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }

        .table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #495057;
        }

        .table tbody tr:hover {
            background: #f8f9fa;
        }

        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-passed {
            background: #d4edda;
            color: #155724;
        }

        .status-failed {
            background: #f8d7da;
            color: #721c24;
        }

        .status-blocked {
            background: #d1ecf1;
            color: #0c5460;
        }

        .priority-high {
            color: #dc3545;
            font-weight: 600;
        }

        .priority-medium {
            color: #ffc107;
            font-weight: 600;
        }

        .priority-low {
            color: #28a745;
            font-weight: 600;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 80%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #000;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            color: #6c757d;
            margin-top: 5px;
        }

        .filters {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-group {
            flex: 1;
            min-width: 150px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #6c757d;
        }

        .alert {
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
            border: 1px solid transparent;
        }

        .alert-success {
            color: #155724;
            background-color: #d4edda;
            border-color: #c3e6cb;
        }

        .alert-danger {
            color: #721c24;
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }

        .alert-info {
            color: #0c5460;
            background-color: #d1ecf1;
            border-color: #bee5eb;
        }

        .test-steps {
            margin-top: 15px;
        }

        .test-step {
            background: #f8f9fa;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            border-left: 4px solid #667eea;
        }

        .execution-history {
            margin-top: 20px;
        }

        .execution-item {
            background: #f8f9fa;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }

        .execution-item.failed {
            border-left-color: #dc3545;
        }

        .execution-item.blocked {
            border-left-color: #17a2b8;
        }

        /* é¡¹ç›®è¯¦æƒ…æ ·å¼ */
        .project-detail h2 {
            color: #495057;
            margin-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
        }

        .project-detail h3 {
            color: #495057;
            margin-top: 25px;
            margin-bottom: 15px;
        }

        .project-detail p {
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .project-detail strong {
            color: #495057;
            font-weight: 600;
        }

        .project-detail .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .project-detail .stat-card {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            transition: transform 0.2s;
        }

        .project-detail .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .project-detail .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #495057;
            margin-bottom: 5px;
        }

        .project-detail .stat-label {
            font-size: 12px;
            color: #6c757d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }

            .header {
                padding: 20px;
            }

            .header h1 {
                font-size: 2em;
            }

            .tab-content {
                padding: 20px;
            }

            .filters {
                flex-direction: column;
            }

            .modal-content {
                width: 95%;
                margin: 10% auto;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“Š æµ‹è¯•ç”¨ä¾‹ç®¡ç†ç³»ç»Ÿ</h1>
            <p>ä¸“ä¸šçš„æµ‹è¯•ç”¨ä¾‹ç®¡ç†å’Œæ‰§è¡Œè·Ÿè¸ªå¹³å°</p>
            <div class="nav-menu">
                <a href="/" class="nav-link">ğŸ“ ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹</a>
                <a href="/manage.html" class="nav-link active">ğŸ“Š ç®¡ç†ç³»ç»Ÿ</a>
            </div>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('projects')">é¡¹ç›®ç®¡ç†</button>
            <button class="nav-tab" onclick="showTab('testcases')">æµ‹è¯•ç”¨ä¾‹</button>
            <button class="nav-tab" onclick="showTab('reports')">æµ‹è¯•æŠ¥è¡¨</button>
            <button class="nav-tab" onclick="showTab('generator')">ç”Ÿæˆå™¨</button>
        </div>

        <!-- é¡¹ç›®ç®¡ç†æ ‡ç­¾é¡µ -->
        <div id="projects" class="tab-content active">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2>é¡¹ç›®ç®¡ç†</h2>
                <button class="btn btn-primary" onclick="showCreateProjectModal()">åˆ›å»ºé¡¹ç›®</button>
            </div>

            <div id="projectsStats" class="stats-grid">
                <!-- é¡¹ç›®ç»Ÿè®¡ä¿¡æ¯å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
            </div>

            <div class="table-container">
                <table class="table">
                    <thead>
                        <tr>
                            <th>é¡¹ç›®åç§°</th>
                            <th>ç‰ˆæœ¬</th>
                            <th>æè¿°</th>
                            <th>æµ‹è¯•ç”¨ä¾‹æ•°</th>
                            <th>é€šè¿‡ç‡</th>
                            <th>åˆ›å»ºæ—¶é—´</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="projectsTableBody">
                        <tr>
                            <td colspan="7" class="loading">åŠ è½½ä¸­...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- æµ‹è¯•ç”¨ä¾‹æ ‡ç­¾é¡µ -->
        <div id="testcases" class="tab-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2>æµ‹è¯•ç”¨ä¾‹ç®¡ç†</h2>
                <div>
                    <button class="btn btn-primary" onclick="showCreateTestCaseModal()">åˆ›å»ºæµ‹è¯•ç”¨ä¾‹</button>
                    <button class="btn btn-info" onclick="showImportModal()">æ‰¹é‡å¯¼å…¥</button>
                </div>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <label>é¡¹ç›®</label>
                    <select class="form-control" id="projectFilter" onchange="filterTestCases()">
                        <option value="">æ‰€æœ‰é¡¹ç›®</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>ç±»å‹</label>
                    <select class="form-control" id="typeFilter" onchange="filterTestCases()">
                        <option value="">æ‰€æœ‰ç±»å‹</option>
                        <option value="functional">åŠŸèƒ½æµ‹è¯•</option>
                        <option value="performance">æ€§èƒ½æµ‹è¯•</option>
                        <option value="security">å®‰å…¨æµ‹è¯•</option>
                        <option value="ui">ç•Œé¢æµ‹è¯•</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>ä¼˜å…ˆçº§</label>
                    <select class="form-control" id="priorityFilter" onchange="filterTestCases()">
                        <option value="">æ‰€æœ‰ä¼˜å…ˆçº§</option>
                        <option value="high">é«˜</option>
                        <option value="medium">ä¸­</option>
                        <option value="low">ä½</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>çŠ¶æ€</label>
                    <select class="form-control" id="statusFilter" onchange="filterTestCases()">
                        <option value="">æ‰€æœ‰çŠ¶æ€</option>
                        <option value="pending">å¾…æ‰§è¡Œ</option>
                        <option value="passed">é€šè¿‡</option>
                        <option value="failed">å¤±è´¥</option>
                        <option value="blocked">é˜»å¡</option>
                    </select>
                </div>
            </div>

            <div class="table-container">
                <table class="table">
                    <thead>
                        <tr>
                            <th>ç”¨ä¾‹ID</th>
                            <th>æ ‡é¢˜</th>
                            <th>ç±»å‹</th>
                            <th>ä¼˜å…ˆçº§</th>
                            <th>çŠ¶æ€</th>
                            <th>æ‰§è¡Œäºº</th>
                            <th>æ‰§è¡Œæ—¶é—´</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="testCasesTableBody">
                        <tr>
                            <td colspan="8" class="loading">åŠ è½½ä¸­...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- æµ‹è¯•æŠ¥è¡¨æ ‡ç­¾é¡µ -->
        <div id="reports" class="tab-content">
            <h2>æµ‹è¯•æŠ¥è¡¨</h2>
            
            <div class="form-group">
                <label>é€‰æ‹©é¡¹ç›®</label>
                <select class="form-control" id="reportProjectSelect">
                    <option value="">è¯·é€‰æ‹©é¡¹ç›®</option>
                </select>
            </div>

            <button class="btn btn-primary" onclick="generateReport()">ç”ŸæˆæŠ¥è¡¨</button>

            <div id="reportContent" style="margin-top: 30px;">
                <!-- æŠ¥è¡¨å†…å®¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
            </div>
        </div>

        <!-- ç”Ÿæˆå™¨æ ‡ç­¾é¡µ -->
        <div id="generator" class="tab-content">
            <h2>æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆå™¨</h2>
            <p>ä¸Šä¼ éœ€æ±‚æ–‡æ¡£ï¼Œè‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹å¹¶ä¿å­˜åˆ°æ•°æ®åº“</p>
            
            <div class="form-group">
                <label>é€‰æ‹©é¡¹ç›®</label>
                <select class="form-control" id="generatorProjectSelect">
                    <option value="">è¯·é€‰æ‹©é¡¹ç›®ï¼ˆå¯é€‰ï¼‰</option>
                </select>
            </div>

            <iframe src="/" style="width: 100%; height: 600px; border: 1px solid #ddd; border-radius: 8px;"></iframe>
        </div>
    </div>

    <!-- åˆ›å»ºé¡¹ç›®æ¨¡æ€æ¡† -->
    <div id="createProjectModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('createProjectModal')">&times;</span>
            <h2>åˆ›å»ºæ–°é¡¹ç›®</h2>
            <form id="createProjectForm">
                <div class="form-group">
                    <label>é¡¹ç›®åç§° *</label>
                    <input type="text" class="form-control" id="projectName" required>
                </div>
                <div class="form-group">
                    <label>ç‰ˆæœ¬å·</label>
                    <input type="text" class="form-control" id="projectVersion" placeholder="1.0.0">
                </div>
                <div class="form-group">
                    <label>é¡¹ç›®æè¿°</label>
                    <textarea class="form-control" id="projectDescription" rows="3"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">åˆ›å»ºé¡¹ç›®</button>
            </form>
        </div>
    </div>

    <!-- åˆ›å»ºæµ‹è¯•ç”¨ä¾‹æ¨¡æ€æ¡† -->
    <div id="createTestCaseModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('createTestCaseModal')">&times;</span>
            <h2>åˆ›å»ºæµ‹è¯•ç”¨ä¾‹</h2>
            <form id="createTestCaseForm">
                <div class="form-group">
                    <label>æ‰€å±é¡¹ç›® *</label>
                    <select class="form-control" id="testCaseProject" required>
                        <option value="">è¯·é€‰æ‹©é¡¹ç›®</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ç”¨ä¾‹æ ‡é¢˜ *</label>
                    <input type="text" class="form-control" id="testCaseTitle" required>
                </div>
                <div class="form-group">
                    <label>ç”¨ä¾‹æè¿°</label>
                    <textarea class="form-control" id="testCaseDescription" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>æµ‹è¯•ç±»å‹ *</label>
                    <select class="form-control" id="testCaseType" required>
                        <option value="functional">åŠŸèƒ½æµ‹è¯•</option>
                        <option value="performance">æ€§èƒ½æµ‹è¯•</option>
                        <option value="security">å®‰å…¨æµ‹è¯•</option>
                        <option value="ui">ç•Œé¢æµ‹è¯•</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ä¼˜å…ˆçº§ *</label>
                    <select class="form-control" id="testCasePriority" required>
                        <option value="high">é«˜</option>
                        <option value="medium">ä¸­</option>
                        <option value="low">ä½</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>å‰ç½®æ¡ä»¶</label>
                    <textarea class="form-control" id="testCasePreconditions" rows="2"></textarea>
                </div>
                <div class="form-group">
                    <label>æµ‹è¯•æ­¥éª¤</label>
                    <textarea class="form-control" id="testCaseSteps" rows="4" placeholder="è¯·æŒ‰ä»¥ä¸‹æ ¼å¼è¾“å…¥æµ‹è¯•æ­¥éª¤ï¼š&#10;1. æ‰“å¼€ç™»å½•é¡µé¢&#10;2. è¾“å…¥ç”¨æˆ·åå’Œå¯†ç &#10;3. ç‚¹å‡»ç™»å½•æŒ‰é’®&#10;4. éªŒè¯ç™»å½•ç»“æœ"></textarea>
                </div>
                <div class="form-group">
                    <label>é¢„æœŸç»“æœ</label>
                    <textarea class="form-control" id="testCaseExpectedResult" rows="3"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">åˆ›å»ºæµ‹è¯•ç”¨ä¾‹</button>
            </form>
        </div>
    </div>

    <!-- æµ‹è¯•ç”¨ä¾‹è¯¦æƒ…æ¨¡æ€æ¡† -->
    <div id="testCaseDetailModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('testCaseDetailModal')">&times;</span>
            <div id="testCaseDetailContent">
                <!-- æµ‹è¯•ç”¨ä¾‹è¯¦æƒ…å†…å®¹ -->
            </div>
        </div>
    </div>

    <!-- æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹æ¨¡æ€æ¡† -->
    <div id="executeTestCaseModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('executeTestCaseModal')">&times;</span>
            <h2>æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹</h2>
            <form id="executeTestCaseForm">
                <input type="hidden" id="executeTestCaseId">
                <div class="form-group">
                    <label>æµ‹è¯•ç»“æœ *</label>
                    <select class="form-control" id="testResult" required>
                        <option value="passed">é€šè¿‡</option>
                        <option value="failed">å¤±è´¥</option>
                        <option value="blocked">é˜»å¡</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>æ‰§è¡Œäºº *</label>
                    <input type="text" class="form-control" id="executedBy" required>
                </div>
                <div class="form-group">
                    <label>å¤‡æ³¨</label>
                    <textarea class="form-control" id="executionNotes" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>ç¼ºé™·ID</label>
                    <input type="text" class="form-control" id="defectId" placeholder="å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œè¯·è¾“å…¥ç¼ºé™·ID">
                </div>
                <button type="submit" class="btn btn-primary">æäº¤æ‰§è¡Œç»“æœ</button>
            </form>
        </div>
    </div>

    <!-- é¡¹ç›®è¯¦æƒ…æ¨¡æ€æ¡† -->
    <div id="projectDetailModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('projectDetailModal')">&times;</span>
            <div id="projectDetailContent">
                <!-- é¡¹ç›®è¯¦æƒ…å†…å®¹ -->
            </div>
        </div>
    </div>

    <!-- ç¼–è¾‘é¡¹ç›®æ¨¡æ€æ¡† -->
    <div id="editProjectModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('editProjectModal')">&times;</span>
            <h2>ç¼–è¾‘é¡¹ç›®</h2>
            <form id="editProjectForm">
                <input type="hidden" id="editProjectId">
                <div class="form-group">
                    <label>é¡¹ç›®åç§° *</label>
                    <input type="text" class="form-control" id="editProjectName" required>
                </div>
                <div class="form-group">
                    <label>ç‰ˆæœ¬å·</label>
                    <input type="text" class="form-control" id="editProjectVersion" placeholder="1.0.0">
                </div>
                <div class="form-group">
                    <label>é¡¹ç›®æè¿°</label>
                    <textarea class="form-control" id="editProjectDescription" rows="3"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">ä¿å­˜ä¿®æ”¹</button>
            </form>
        </div>
    </div>

    <!-- ç¼–è¾‘æµ‹è¯•ç”¨ä¾‹æ¨¡æ€æ¡† -->
    <div id="editTestCaseModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('editTestCaseModal')">&times;</span>
            <h2>ç¼–è¾‘æµ‹è¯•ç”¨ä¾‹</h2>
            <form id="editTestCaseForm">
                <input type="hidden" id="editTestCaseId">
                <div class="form-group">
                    <label>æ‰€å±é¡¹ç›® *</label>
                    <select class="form-control" id="editTestCaseProject" required>
                        <option value="">è¯·é€‰æ‹©é¡¹ç›®</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>æµ‹è¯•ç”¨ä¾‹æ ‡é¢˜ *</label>
                    <input type="text" class="form-control" id="editTestCaseTitle" required>
                </div>
                <div class="form-group">
                    <label>æµ‹è¯•ç”¨ä¾‹æè¿°</label>
                    <textarea class="form-control" id="editTestCaseDescription" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>æµ‹è¯•ç±»å‹ *</label>
                    <select class="form-control" id="editTestCaseType" required>
                        <option value="functional">åŠŸèƒ½æµ‹è¯•</option>
                        <option value="performance">æ€§èƒ½æµ‹è¯•</option>
                        <option value="security">å®‰å…¨æµ‹è¯•</option>
                        <option value="ui">ç•Œé¢æµ‹è¯•</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ä¼˜å…ˆçº§ *</label>
                    <select class="form-control" id="editTestCasePriority" required>
                        <option value="high">é«˜</option>
                        <option value="medium">ä¸­</option>
                        <option value="low">ä½</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>å‰ç½®æ¡ä»¶</label>
                    <textarea class="form-control" id="editTestCasePreconditions" rows="3" placeholder="æ¯è¡Œä¸€ä¸ªå‰ç½®æ¡ä»¶"></textarea>
                </div>
                <div class="form-group">
                    <label>æµ‹è¯•æ­¥éª¤ *</label>
                    <textarea class="form-control" id="editTestCaseSteps" rows="5" placeholder="è¯·æŒ‰ä»¥ä¸‹æ ¼å¼è¾“å…¥æµ‹è¯•æ­¥éª¤ï¼š&#10;1. æ‰“å¼€ç™»å½•é¡µé¢&#10;2. è¾“å…¥ç”¨æˆ·åå’Œå¯†ç &#10;3. ç‚¹å‡»ç™»å½•æŒ‰é’®&#10;4. éªŒè¯ç™»å½•ç»“æœ" required></textarea>
                </div>
                <div class="form-group">
                    <label>é¢„æœŸç»“æœ *</label>
                    <textarea class="form-control" id="editTestCaseExpectedResult" rows="3" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary">ä¿å­˜ä¿®æ”¹</button>
            </form>
        </div>
    </div>

    <!-- æ‰¹é‡å¯¼å…¥æµ‹è¯•ç”¨ä¾‹æ¨¡æ€æ¡† -->
    <div id="importTestCasesModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('importTestCasesModal')">&times;</span>
            <h2>æ‰¹é‡å¯¼å…¥æµ‹è¯•ç”¨ä¾‹</h2>
            <form id="importTestCasesForm">
                <div class="form-group">
                    <label>æ‰€å±é¡¹ç›® *</label>
                    <select class="form-control" id="importProjectSelect" required>
                        <option value="">è¯·é€‰æ‹©é¡¹ç›®</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>å¯¼å…¥æ–‡ä»¶ *</label>
                    <input type="file" class="form-control" id="importFile" accept=".csv,.json,.xls,.xlsx" required>
                    <small class="form-text text-muted">æ”¯æŒCSVã€JSONã€XLSå’ŒXLSXæ ¼å¼æ–‡ä»¶</small>
                </div>
                <div class="form-group">
                    <label>æ–‡ä»¶æ ¼å¼è¯´æ˜</label>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-top: 10px;">
                        <h5>Excelæ ¼å¼ç¤ºä¾‹ï¼ˆæ”¯æŒ.xlså’Œ.xlsxï¼‰ï¼š</h5>
                        <p style="font-size: 12px; margin-bottom: 10px;">Excelæ–‡ä»¶ç¬¬ä¸€è¡Œä¸ºæ ‡é¢˜è¡Œï¼Œæ”¯æŒä¸­è‹±æ–‡åˆ—åï¼š</p>
                        <table style="font-size: 11px; border-collapse: collapse; width: 100%; margin-bottom: 15px;">
                            <tr style="background: #e9ecef;">
                                <th style="border: 1px solid #ccc; padding: 4px;">æ ‡é¢˜/title</th>
                                <th style="border: 1px solid #ccc; padding: 4px;">æè¿°/description</th>
                                <th style="border: 1px solid #ccc; padding: 4px;">ç±»å‹/type</th>
                                <th style="border: 1px solid #ccc; padding: 4px;">ä¼˜å…ˆçº§/priority</th>
                                <th style="border: 1px solid #ccc; padding: 4px;">å‰ç½®æ¡ä»¶/preconditions</th>
                                <th style="border: 1px solid #ccc; padding: 4px;">æµ‹è¯•æ­¥éª¤/test_steps</th>
                                <th style="border: 1px solid #ccc; padding: 4px;">é¢„æœŸç»“æœ/expected_result</th>
                            </tr>
                            <tr>
                                <td style="border: 1px solid #ccc; padding: 4px;">ç™»å½•åŠŸèƒ½æµ‹è¯•</td>
                                <td style="border: 1px solid #ccc; padding: 4px;">éªŒè¯ç”¨æˆ·ç™»å½•åŠŸèƒ½</td>
                                <td style="border: 1px solid #ccc; padding: 4px;">functional</td>
                                <td style="border: 1px solid #ccc; padding: 4px;">high</td>
                                <td style="border: 1px solid #ccc; padding: 4px;">ç”¨æˆ·å·²æ³¨å†Œ</td>
                                <td style="border: 1px solid #ccc; padding: 4px;">1. æ‰“å¼€ç™»å½•é¡µé¢;2. è¾“å…¥ç”¨æˆ·åå¯†ç ;3. ç‚¹å‡»ç™»å½•</td>
                                <td style="border: 1px solid #ccc; padding: 4px;">æˆåŠŸç™»å½•ç³»ç»Ÿ</td>
                            </tr>
                        </table>
                        <h5>CSVæ ¼å¼ç¤ºä¾‹ï¼š</h5>
                        <pre style="font-size: 12px;">title,description,type,priority,preconditions,test_steps,expected_result
"ç™»å½•åŠŸèƒ½æµ‹è¯•","éªŒè¯ç”¨æˆ·ç™»å½•åŠŸèƒ½","functional","high","ç”¨æˆ·å·²æ³¨å†Œ","1. æ‰“å¼€ç™»å½•é¡µé¢\n2. è¾“å…¥ç”¨æˆ·åå¯†ç \n3. ç‚¹å‡»ç™»å½•","æˆåŠŸç™»å½•ç³»ç»Ÿ"</pre>
                        <h5>JSONæ ¼å¼ç¤ºä¾‹ï¼š</h5>
                        <pre style="font-size: 12px;">[{
  "title": "ç™»å½•åŠŸèƒ½æµ‹è¯•",
  "description": "éªŒè¯ç”¨æˆ·ç™»å½•åŠŸèƒ½",
  "type": "functional",
  "priority": "high",
  "preconditions": ["ç”¨æˆ·å·²æ³¨å†Œ"],
  "test_steps": ["1. æ‰“å¼€ç™»å½•é¡µé¢", "2. è¾“å…¥ç”¨æˆ·åå¯†ç ", "3. ç‚¹å‡»ç™»å½•"],
  "expected_result": "æˆåŠŸç™»å½•ç³»ç»Ÿ"
}]</pre>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">å¼€å§‹å¯¼å…¥</button>
            </form>
            <div id="importProgress" style="display: none; margin-top: 20px;">
                <h4>å¯¼å…¥è¿›åº¦</h4>
                <div class="progress" style="height: 20px;">
                    <div id="importProgressBar" class="progress-bar" role="progressbar" style="width: 0%"></div>
                </div>
                <div id="importStatus" style="margin-top: 10px;"></div>
            </div>
            <div id="importResults" style="display: none; margin-top: 20px;">
                <h4>å¯¼å…¥ç»“æœ</h4>
                <div id="importResultsContent"></div>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let currentProjects = [];
        let currentTestCases = [];
        let currentProjectId = null;

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadProjects();
            loadTestCases();
            
            // ç»‘å®šè¡¨å•æäº¤äº‹ä»¶
            document.getElementById('createProjectForm').addEventListener('submit', createProject);
            document.getElementById('createTestCaseForm').addEventListener('submit', createTestCase);
            document.getElementById('executeTestCaseForm').addEventListener('submit', executeTestCase);
            document.getElementById('editTestCaseForm').addEventListener('submit', saveTestCaseEdit);
            document.getElementById('importTestCasesForm').addEventListener('submit', importTestCases);
        });

        // æ ‡ç­¾é¡µåˆ‡æ¢
        function showTab(tabName) {
            // éšè—æ‰€æœ‰æ ‡ç­¾é¡µå†…å®¹
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            
            // ç§»é™¤æ‰€æœ‰æ ‡ç­¾é¡µçš„æ¿€æ´»çŠ¶æ€
            const navTabs = document.querySelectorAll('.nav-tab');
            navTabs.forEach(tab => tab.classList.remove('active'));
            
            // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾é¡µ
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // æ ¹æ®æ ‡ç­¾é¡µåŠ è½½ç›¸åº”æ•°æ®
            if (tabName === 'projects') {
                loadProjects();
            } else if (tabName === 'testcases') {
                loadTestCases();
            } else if (tabName === 'reports') {
                loadProjectsForReport();
            } else if (tabName === 'generator') {
                loadProjectsForGenerator();
            }
        }

        // åŠ è½½é¡¹ç›®åˆ—è¡¨
        async function loadProjects() {
            try {
                const response = await fetch('/api/projects');
                const result = await response.json();
                
                if (result.success) {
                    currentProjects = result.data;
                    renderProjectsTable();
                    updateProjectSelects();
                } else {
                    showAlert('åŠ è½½é¡¹ç›®å¤±è´¥', 'danger');
                }
            } catch (error) {
                console.error('åŠ è½½é¡¹ç›®å¤±è´¥:', error);
                showAlert('åŠ è½½é¡¹ç›®å¤±è´¥', 'danger');
            }
        }

        // æ¸²æŸ“é¡¹ç›®è¡¨æ ¼
        function renderProjectsTable() {
            const tbody = document.getElementById('projectsTableBody');
            
            if (currentProjects.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7" class="loading">æš‚æ— é¡¹ç›®</td></tr>';
                return;
            }
            
            tbody.innerHTML = currentProjects.map(project => `
                <tr>
                    <td><strong>${project.name}</strong></td>
                    <td>${project.version || '-'}</td>
                    <td>${project.description || '-'}</td>
                    <td>-</td>
                    <td>-</td>
                    <td>${new Date(project.created_at).toLocaleDateString()}</td>
                    <td>
                        <button class="btn btn-info btn-sm" onclick="viewProject(${project.id})">æŸ¥çœ‹</button>
                        <button class="btn btn-warning btn-sm" onclick="editProject(${project.id})">ç¼–è¾‘</button>
                        <button class="btn btn-danger btn-sm" onclick="deleteProject(${project.id})">åˆ é™¤</button>
                    </td>
                </tr>
            `).join('');
        }

        // æ›´æ–°é¡¹ç›®é€‰æ‹©ä¸‹æ‹‰æ¡†
        function updateProjectSelects() {
            const selects = [
                'projectFilter',
                'testCaseProject',
                'editTestCaseProject',
                'reportProjectSelect',
                'generatorProjectSelect',
                'importProjectSelect'
            ];
            
            selects.forEach(selectId => {
                const select = document.getElementById(selectId);
                if (select) {
                    const currentValue = select.value;
                    const options = currentProjects.map(project => 
                        `<option value="${project.id}">${project.name}</option>`
                    ).join('');
                    
                    if (selectId === 'projectFilter') {
                        select.innerHTML = '<option value="">æ‰€æœ‰é¡¹ç›®</option>' + options;
                    } else {
                        select.innerHTML = '<option value="">è¯·é€‰æ‹©é¡¹ç›®</option>' + options;
                    }
                    
                    select.value = currentValue;
                }
            });
        }

        // åˆ›å»ºé¡¹ç›®
        async function createProject(event) {
            event.preventDefault();
            
            const formData = {
                name: document.getElementById('projectName').value,
                version: document.getElementById('projectVersion').value,
                description: document.getElementById('projectDescription').value
            };
            
            try {
                const response = await fetch('/api/projects', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showAlert('é¡¹ç›®åˆ›å»ºæˆåŠŸ', 'success');
                    closeModal('createProjectModal');
                    document.getElementById('createProjectForm').reset();
                    loadProjects();
                } else {
                    showAlert(result.error || 'åˆ›å»ºé¡¹ç›®å¤±è´¥', 'danger');
                }
            } catch (error) {
                console.error('åˆ›å»ºé¡¹ç›®å¤±è´¥:', error);
                showAlert('åˆ›å»ºé¡¹ç›®å¤±è´¥', 'danger');
            }
        }

        // æŸ¥çœ‹é¡¹ç›®è¯¦æƒ…
        async function viewProject(projectId) {
            try {
                const response = await fetch(`/api/projects/${projectId}`);
                const result = await response.json();
                
                if (result.success) {
                    const project = result.data;
                    const stats = project.stats || {};
                    
                    const content = `
                        <h2>é¡¹ç›®è¯¦æƒ…</h2>
                        <div class="project-detail">
                            <p><strong>é¡¹ç›®åç§°:</strong> ${project.name}</p>
                            <p><strong>ç‰ˆæœ¬å·:</strong> ${project.version || '-'}</p>
                            <p><strong>é¡¹ç›®æè¿°:</strong> ${project.description || '-'}</p>
                            <p><strong>åˆ›å»ºæ—¶é—´:</strong> ${new Date(project.created_at).toLocaleString()}</p>
                            ${project.updated_at ? `<p><strong>æ›´æ–°æ—¶é—´:</strong> ${new Date(project.updated_at).toLocaleString()}</p>` : ''}
                            
                            <h3>æµ‹è¯•ç”¨ä¾‹ç»Ÿè®¡</h3>
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-number">${stats.total_cases || 0}</div>
                                    <div class="stat-label">æ€»ç”¨ä¾‹æ•°</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number">${stats.passed_cases || 0}</div>
                                    <div class="stat-label">é€šè¿‡</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number">${stats.failed_cases || 0}</div>
                                    <div class="stat-label">å¤±è´¥</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number">${stats.pending_cases || 0}</div>
                                    <div class="stat-label">å¾…å¤„ç†</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number">${stats.blocked_cases || 0}</div>
                                    <div class="stat-label">é˜»å¡</div>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    document.getElementById('projectDetailContent').innerHTML = content;
                    showModal('projectDetailModal');
                } else {
                    showAlert(result.error || 'è·å–é¡¹ç›®è¯¦æƒ…å¤±è´¥', 'danger');
                }
            } catch (error) {
                console.error('è·å–é¡¹ç›®è¯¦æƒ…å¤±è´¥:', error);
                showAlert('è·å–é¡¹ç›®è¯¦æƒ…å¤±è´¥', 'danger');
            }
        }

        // ç¼–è¾‘é¡¹ç›®
        async function editProject(projectId) {
            try {
                const response = await fetch(`/api/projects/${projectId}`);
                const result = await response.json();
                
                if (result.success) {
                    const project = result.data;
                    
                    // å¡«å……ç¼–è¾‘è¡¨å•
                    document.getElementById('editProjectId').value = project.id;
                    document.getElementById('editProjectName').value = project.name;
                    document.getElementById('editProjectVersion').value = project.version || '';
                    document.getElementById('editProjectDescription').value = project.description || '';
                    
                    showModal('editProjectModal');
                } else {
                    showAlert(result.error || 'è·å–é¡¹ç›®ä¿¡æ¯å¤±è´¥', 'danger');
                }
            } catch (error) {
                console.error('è·å–é¡¹ç›®ä¿¡æ¯å¤±è´¥:', error);
                showAlert('è·å–é¡¹ç›®ä¿¡æ¯å¤±è´¥', 'danger');
            }
        }

        // ä¿å­˜é¡¹ç›®ç¼–è¾‘
        async function saveProjectEdit(event) {
            event.preventDefault();
            
            const projectId = document.getElementById('editProjectId').value;
            const formData = {
                name: document.getElementById('editProjectName').value,
                version: document.getElementById('editProjectVersion').value,
                description: document.getElementById('editProjectDescription').value
            };
            
            try {
                const response = await fetch(`/api/projects/${projectId}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showAlert('é¡¹ç›®æ›´æ–°æˆåŠŸ', 'success');
                    closeModal('editProjectModal');
                    loadProjects();
                } else {
                    showAlert(result.error || 'æ›´æ–°é¡¹ç›®å¤±è´¥', 'danger');
                }
            } catch (error) {
                console.error('æ›´æ–°é¡¹ç›®å¤±è´¥:', error);
                showAlert('æ›´æ–°é¡¹ç›®å¤±è´¥', 'danger');
            }
        }

        // åˆ é™¤é¡¹ç›®
        async function deleteProject(projectId) {
            if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé¡¹ç›®å—ï¼Ÿåˆ é™¤åæ— æ³•æ¢å¤ï¼')) {
                return;
            }
            
            try {
                const response = await fetch(`/api/projects/${projectId}`, {
                    method: 'DELETE'
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showAlert('é¡¹ç›®åˆ é™¤æˆåŠŸ', 'success');
                    loadProjects();
                } else {
                    showAlert(result.error || 'åˆ é™¤é¡¹ç›®å¤±è´¥', 'danger');
                }
            } catch (error) {
                console.error('åˆ é™¤é¡¹ç›®å¤±è´¥:', error);
                showAlert('åˆ é™¤é¡¹ç›®å¤±è´¥', 'danger');
            }
        }

        // åŠ è½½æµ‹è¯•ç”¨ä¾‹åˆ—è¡¨
        async function loadTestCases() {
            try {
                const response = await fetch('/api/test-cases');
                const result = await response.json();
                
                if (result.success) {
                    currentTestCases = result.data;
                    renderTestCasesTable();
                } else {
                    showAlert('åŠ è½½æµ‹è¯•ç”¨ä¾‹å¤±è´¥', 'danger');
                }
            } catch (error) {
                console.error('åŠ è½½æµ‹è¯•ç”¨ä¾‹å¤±è´¥:', error);
                showAlert('åŠ è½½æµ‹è¯•ç”¨ä¾‹å¤±è´¥', 'danger');
            }
        }

        // æ¸²æŸ“æµ‹è¯•ç”¨ä¾‹è¡¨æ ¼
        function renderTestCasesTable() {
            const tbody = document.getElementById('testCasesTableBody');
            
            if (currentTestCases.length === 0) {
                tbody.innerHTML = '<tr><td colspan="8" class="loading">æš‚æ— æµ‹è¯•ç”¨ä¾‹</td></tr>';
                return;
            }
            
            tbody.innerHTML = currentTestCases.map(testCase => `
                <tr>
                    <td><strong>${testCase.case_id}</strong></td>
                    <td>${testCase.title}</td>
                    <td>${getTypeDisplayName(testCase.type)}</td>
                    <td><span class="priority-${testCase.priority}">${getPriorityDisplayName(testCase.priority)}</span></td>
                    <td><span class="status-badge status-${testCase.status}">${getStatusDisplayName(testCase.status)}</span></td>
                    <td>${testCase.executed_by || '-'}</td>
                    <td>${testCase.executed_at ? new Date(testCase.executed_at).toLocaleDateString() : '-'}</td>
                    <td>
                        <button class="btn btn-info btn-sm" onclick="viewTestCase(${testCase.id})">æŸ¥çœ‹</button>
                        <button class="btn btn-success btn-sm" onclick="executeTestCaseModal(${testCase.id})">æ‰§è¡Œ</button>
                        <button class="btn btn-warning btn-sm" onclick="editTestCase(${testCase.id})">ç¼–è¾‘</button>
                        <button class="btn btn-danger btn-sm" onclick="deleteTestCase(${testCase.id})">åˆ é™¤</button>
                    </td>
                </tr>
            `).join('');
        }

        // ç­›é€‰æµ‹è¯•ç”¨ä¾‹
        function filterTestCases() {
            const projectId = document.getElementById('projectFilter').value;
            const type = document.getElementById('typeFilter').value;
            const priority = document.getElementById('priorityFilter').value;
            const status = document.getElementById('statusFilter').value;
            
            const params = new URLSearchParams();
            if (projectId) params.append('project_id', projectId);
            if (type) params.append('type', type);
            if (priority) params.append('priority', priority);
            if (status) params.append('status', status);
            
            fetch(`/api/test-cases?${params.toString()}`)
                .then(response => response.json())
                .then(result => {
                    if (result.success) {
                        currentTestCases = result.data;
                        renderTestCasesTable();
                    }
                })
                .catch(error => {
                    console.error('ç­›é€‰æµ‹è¯•ç”¨ä¾‹å¤±è´¥:', error);
                });
        }

        // åˆ›å»ºæµ‹è¯•ç”¨ä¾‹
        async function createTestCase(event) {
            event.preventDefault();
            
            const formData = {
                project_id: document.getElementById('testCaseProject').value,
                title: document.getElementById('testCaseTitle').value,
                description: document.getElementById('testCaseDescription').value,
                type: document.getElementById('testCaseType').value,
                priority: document.getElementById('testCasePriority').value,
                preconditions: document.getElementById('testCasePreconditions').value.split('\n').filter(line => line.trim()),
                test_steps: document.getElementById('testCaseSteps').value.split('\n').filter(line => line.trim()),
                expected_result: document.getElementById('testCaseExpectedResult').value
            };
            
            try {
                const response = await fetch('/api/test-cases', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showAlert('æµ‹è¯•ç”¨ä¾‹åˆ›å»ºæˆåŠŸ', 'success');
                    closeModal('createTestCaseModal');
                    document.getElementById('createTestCaseForm').reset();
                    loadTestCases();
                } else {
                    showAlert(result.error || 'åˆ›å»ºæµ‹è¯•ç”¨ä¾‹å¤±è´¥', 'danger');
                }
            } catch (error) {
                console.error('åˆ›å»ºæµ‹è¯•ç”¨ä¾‹å¤±è´¥:', error);
                showAlert('åˆ›å»ºæµ‹è¯•ç”¨ä¾‹å¤±è´¥', 'danger');
            }
        }

        // æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹
        async function executeTestCase(event) {
            event.preventDefault();
            
            const testCaseId = document.getElementById('executeTestCaseId').value;
            const formData = {
                status: document.getElementById('testResult').value,
                executed_by: document.getElementById('executedBy').value,
                notes: document.getElementById('executionNotes').value,
                defect_id: document.getElementById('defectId').value
            };
            
            try {
                const response = await fetch(`/api/test-cases/${testCaseId}/execute`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showAlert('æµ‹è¯•æ‰§è¡Œè®°å½•å·²ä¿å­˜', 'success');
                    closeModal('executeTestCaseModal');
                    document.getElementById('executeTestCaseForm').reset();
                    loadTestCases();
                } else {
                    showAlert(result.error || 'ä¿å­˜æ‰§è¡Œè®°å½•å¤±è´¥', 'danger');
                }
            } catch (error) {
                console.error('ä¿å­˜æ‰§è¡Œè®°å½•å¤±è´¥:', error);
                showAlert('ä¿å­˜æ‰§è¡Œè®°å½•å¤±è´¥', 'danger');
            }
        }

        // æ˜¾ç¤ºæ¨¡æ€æ¡†
        function showModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        // å…³é—­æ¨¡æ€æ¡†
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // æ˜¾ç¤ºåˆ›å»ºé¡¹ç›®æ¨¡æ€æ¡†
        function showCreateProjectModal() {
            showModal('createProjectModal');
        }

        // æ˜¾ç¤ºåˆ›å»ºæµ‹è¯•ç”¨ä¾‹æ¨¡æ€æ¡†
        function showCreateTestCaseModal() {
            showModal('createTestCaseModal');
        }

        // æ˜¾ç¤ºæ‰§è¡Œæµ‹è¯•ç”¨ä¾‹æ¨¡æ€æ¡†
        function executeTestCaseModal(testCaseId) {
            document.getElementById('executeTestCaseId').value = testCaseId;
            showModal('executeTestCaseModal');
        }

        // æŸ¥çœ‹æµ‹è¯•ç”¨ä¾‹è¯¦æƒ…
        async function viewTestCase(testCaseId) {
            try {
                const response = await fetch(`/api/test-cases/${testCaseId}`);
                const result = await response.json();
                
                if (result.success) {
                    const testCase = result.data;
                    const content = `
                        <h2>${testCase.title}</h2>
                        <p><strong>ç”¨ä¾‹ID:</strong> ${testCase.case_id}</p>
                        <p><strong>é¡¹ç›®:</strong> ${testCase.project_name}</p>
                        <p><strong>ç±»å‹:</strong> ${getTypeDisplayName(testCase.type)}</p>
                        <p><strong>ä¼˜å…ˆçº§:</strong> ${getPriorityDisplayName(testCase.priority)}</p>
                        <p><strong>çŠ¶æ€:</strong> <span class="status-badge status-${testCase.status}">${getStatusDisplayName(testCase.status)}</span></p>
                        <p><strong>æè¿°:</strong> ${testCase.description || '-'}</p>
                        
                        <h3>å‰ç½®æ¡ä»¶</h3>
                        <div>${Array.isArray(testCase.preconditions) ? testCase.preconditions.map(p => `<div>â€¢ ${p}</div>`).join('') : testCase.preconditions || '-'}</div>
                        
                        <h3>æµ‹è¯•æ­¥éª¤</h3>
                        <div class="test-steps">
                            ${Array.isArray(testCase.test_steps) ? testCase.test_steps.map((step, index) => `
                                <div class="test-step">
                                    <strong>æ­¥éª¤ ${index + 1}:</strong> ${step}
                                </div>
                            `).join('') : testCase.test_steps || '-'}
                        </div>
                        
                        <h3>é¢„æœŸç»“æœ</h3>
                        <p>${testCase.expected_result || '-'}</p>
                        
                        ${testCase.executions && testCase.executions.length > 0 ? `
                            <h3>æ‰§è¡Œå†å²</h3>
                            <div class="execution-history">
                                ${testCase.executions.map(exec => `
                                    <div class="execution-item ${exec.status}">
                                        <p><strong>æ‰§è¡Œæ—¶é—´:</strong> ${new Date(exec.executed_at).toLocaleString()}</p>
                                        <p><strong>æ‰§è¡Œäºº:</strong> ${exec.executed_by}</p>
                                        <p><strong>ç»“æœ:</strong> <span class="status-badge status-${exec.status}">${getStatusDisplayName(exec.status)}</span></p>
                                        ${exec.notes ? `<p><strong>å¤‡æ³¨:</strong> ${exec.notes}</p>` : ''}
                                        ${exec.defect_id ? `<p><strong>ç¼ºé™·ID:</strong> ${exec.defect_id}</p>` : ''}
                                    </div>
                                `).join('')}
                            </div>
                        ` : ''}
                    `;
                    
                    document.getElementById('testCaseDetailContent').innerHTML = content;
                    showModal('testCaseDetailModal');
                } else {
                    showAlert('è·å–æµ‹è¯•ç”¨ä¾‹è¯¦æƒ…å¤±è´¥', 'danger');
                }
            } catch (error) {
                console.error('è·å–æµ‹è¯•ç”¨ä¾‹è¯¦æƒ…å¤±è´¥:', error);
                showAlert('è·å–æµ‹è¯•ç”¨ä¾‹è¯¦æƒ…å¤±è´¥', 'danger');
            }
        }

        // åˆ é™¤æµ‹è¯•ç”¨ä¾‹
        async function deleteTestCase(testCaseId) {
            console.log('deleteTestCase called with ID:', testCaseId);
            
            // æ·»åŠ è°ƒè¯•ä¿¡æ¯
            if (!testCaseId) {
                console.error('æµ‹è¯•ç”¨ä¾‹IDä¸ºç©º');
                showAlert('æµ‹è¯•ç”¨ä¾‹IDæ— æ•ˆ', 'danger');
                return;
            }
            
            try {
                const confirmResult = confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæµ‹è¯•ç”¨ä¾‹å—ï¼Ÿ');
                console.log('ç¡®è®¤å¯¹è¯æ¡†ç»“æœ:', confirmResult);
                
                if (!confirmResult) {
                    console.log('ç”¨æˆ·å–æ¶ˆåˆ é™¤æ“ä½œ');
                    return;
                }
                
                console.log('å¼€å§‹å‘é€åˆ é™¤è¯·æ±‚...');
                const response = await fetch(`/api/test-cases/${testCaseId}`, {
                    method: 'DELETE'
                });
                
                console.log('åˆ é™¤è¯·æ±‚å“åº”çŠ¶æ€:', response.status);
                const result = await response.json();
                console.log('åˆ é™¤è¯·æ±‚å“åº”ç»“æœ:', result);
                
                if (result.success) {
                    showAlert('æµ‹è¯•ç”¨ä¾‹åˆ é™¤æˆåŠŸ', 'success');
                    loadTestCases();
                } else {
                    showAlert(result.error || 'åˆ é™¤æµ‹è¯•ç”¨ä¾‹å¤±è´¥', 'danger');
                }
            } catch (error) {
                console.error('åˆ é™¤æµ‹è¯•ç”¨ä¾‹å¤±è´¥:', error);
                showAlert('åˆ é™¤æµ‹è¯•ç”¨ä¾‹å¤±è´¥: ' + error.message, 'danger');
            }
        }

        // ç¼–è¾‘æµ‹è¯•ç”¨ä¾‹
        async function editTestCase(testCaseId) {
            try {
                const response = await fetch(`/api/test-cases/${testCaseId}`);
                const result = await response.json();
                
                if (result.success) {
                    const testCase = result.data;
                    
                    // å¡«å……ç¼–è¾‘è¡¨å•
                    document.getElementById('editTestCaseId').value = testCase.id;
                    document.getElementById('editTestCaseProject').value = testCase.project_id;
                    document.getElementById('editTestCaseTitle').value = testCase.title;
                    document.getElementById('editTestCaseDescription').value = testCase.description || '';
                    document.getElementById('editTestCaseType').value = testCase.type;
                    document.getElementById('editTestCasePriority').value = testCase.priority;
                    
                    // å¤„ç†å‰ç½®æ¡ä»¶ï¼ˆå¯èƒ½æ˜¯æ•°ç»„æˆ–å­—ç¬¦ä¸²ï¼‰
                    let preconditions = '';
                    if (Array.isArray(testCase.preconditions)) {
                        preconditions = testCase.preconditions.join('\n');
                    } else if (typeof testCase.preconditions === 'string') {
                        try {
                            const parsed = JSON.parse(testCase.preconditions);
                            preconditions = Array.isArray(parsed) ? parsed.join('\n') : testCase.preconditions;
                        } catch {
                            preconditions = testCase.preconditions;
                        }
                    }
                    document.getElementById('editTestCasePreconditions').value = preconditions;
                    
                    // å¤„ç†æµ‹è¯•æ­¥éª¤ï¼ˆå¯èƒ½æ˜¯æ•°ç»„æˆ–å­—ç¬¦ä¸²ï¼‰
                    let testSteps = '';
                    if (Array.isArray(testCase.test_steps)) {
                        testSteps = testCase.test_steps.join('\n');
                    } else if (typeof testCase.test_steps === 'string') {
                        try {
                            const parsed = JSON.parse(testCase.test_steps);
                            testSteps = Array.isArray(parsed) ? parsed.join('\n') : testCase.test_steps;
                        } catch {
                            testSteps = testCase.test_steps;
                        }
                    }
                    document.getElementById('editTestCaseSteps').value = testSteps;
                    
                    document.getElementById('editTestCaseExpectedResult').value = testCase.expected_result || '';
                    
                    // æ›´æ–°é¡¹ç›®é€‰æ‹©ä¸‹æ‹‰æ¡†
                    updateProjectSelects();
                    
                    showModal('editTestCaseModal');
                } else {
                    showAlert(result.error || 'è·å–æµ‹è¯•ç”¨ä¾‹ä¿¡æ¯å¤±è´¥', 'danger');
                }
            } catch (error) {
                console.error('è·å–æµ‹è¯•ç”¨ä¾‹ä¿¡æ¯å¤±è´¥:', error);
                showAlert('è·å–æµ‹è¯•ç”¨ä¾‹ä¿¡æ¯å¤±è´¥', 'danger');
            }
        }

        // ä¿å­˜æµ‹è¯•ç”¨ä¾‹ç¼–è¾‘
        async function saveTestCaseEdit(event) {
            event.preventDefault();
            
            const testCaseId = document.getElementById('editTestCaseId').value;
            const formData = {
                project_id: document.getElementById('editTestCaseProject').value,
                title: document.getElementById('editTestCaseTitle').value,
                description: document.getElementById('editTestCaseDescription').value,
                type: document.getElementById('editTestCaseType').value,
                priority: document.getElementById('editTestCasePriority').value,
                preconditions: document.getElementById('editTestCasePreconditions').value.split('\n').filter(line => line.trim()),
                test_steps: document.getElementById('editTestCaseSteps').value.split('\n').filter(line => line.trim()),
                expected_result: document.getElementById('editTestCaseExpectedResult').value
            };
            
            try {
                const response = await fetch(`/api/test-cases/${testCaseId}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showAlert('æµ‹è¯•ç”¨ä¾‹æ›´æ–°æˆåŠŸ', 'success');
                    closeModal('editTestCaseModal');
                    loadTestCases();
                } else {
                    showAlert(result.error || 'æ›´æ–°æµ‹è¯•ç”¨ä¾‹å¤±è´¥', 'danger');
                }
            } catch (error) {
                console.error('æ›´æ–°æµ‹è¯•ç”¨ä¾‹å¤±è´¥:', error);
                showAlert('æ›´æ–°æµ‹è¯•ç”¨ä¾‹å¤±è´¥', 'danger');
            }
        }

        // ç”Ÿæˆæµ‹è¯•æŠ¥è¡¨
        async function generateReport() {
            const projectId = document.getElementById('reportProjectSelect').value;
            
            if (!projectId) {
                showAlert('è¯·é€‰æ‹©é¡¹ç›®', 'danger');
                return;
            }
            
            try {
                const response = await fetch(`/api/reports/test-report?project_id=${projectId}`);
                const result = await response.json();
                
                if (result.success) {
                    const report = result.data;
                    const content = `
                        <div class="alert alert-info">
                            <h3>${report.project.name} æµ‹è¯•æŠ¥è¡¨</h3>
                            <p>ç”Ÿæˆæ—¶é—´: ${report.generated_at}</p>
                        </div>
                        
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-number">${report.stats.total_cases || 0}</div>
                                <div class="stat-label">æ€»ç”¨ä¾‹æ•°</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">${report.stats.passed_cases || 0}</div>
                                <div class="stat-label">é€šè¿‡</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">${report.stats.failed_cases || 0}</div>
                                <div class="stat-label">å¤±è´¥</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">${report.stats.pending_cases || 0}</div>
                                <div class="stat-label">å¾…æ‰§è¡Œ</div>
                            </div>
                        </div>
                        
                        <h4>æŒ‰ç±»å‹ç»Ÿè®¡</h4>
                        <div class="table-container">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>ç±»å‹</th>
                                        <th>æ€»æ•°</th>
                                        <th>é€šè¿‡</th>
                                        <th>å¤±è´¥</th>
                                        <th>å¾…æ‰§è¡Œ</th>
                                        <th>é€šè¿‡ç‡</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${Object.entries(report.typeStats || {}).map(([type, stats]) => `
                                        <tr>
                                            <td>${getTypeDisplayName(type)}</td>
                                            <td>${stats.total}</td>
                                            <td>${stats.passed}</td>
                                            <td>${stats.failed}</td>
                                            <td>${stats.pending}</td>
                                            <td>${stats.total > 0 ? Math.round((stats.passed / stats.total) * 100) : 0}%</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    `;
                    
                    document.getElementById('reportContent').innerHTML = content;
                } else {
                    showAlert(result.error || 'ç”ŸæˆæŠ¥è¡¨å¤±è´¥', 'danger');
                }
            } catch (error) {
                console.error('ç”ŸæˆæŠ¥è¡¨å¤±è´¥:', error);
                showAlert('ç”ŸæˆæŠ¥è¡¨å¤±è´¥', 'danger');
            }
        }

        // ä¸ºæŠ¥è¡¨é¡µé¢åŠ è½½é¡¹ç›®
        function loadProjectsForReport() {
            updateProjectSelects();
        }

        // ä¸ºç”Ÿæˆå™¨é¡µé¢åŠ è½½é¡¹ç›®
        function loadProjectsForGenerator() {
            updateProjectSelects();
        }

        // æ˜¾ç¤ºæ‰¹é‡å¯¼å…¥æ¨¡æ€æ¡†
        function showImportModal() {
            updateProjectSelects();
            showModal('importTestCasesModal');
        }

        // æ‰¹é‡å¯¼å…¥æµ‹è¯•ç”¨ä¾‹
        async function importTestCases(event) {
            event.preventDefault();
            
            const projectId = document.getElementById('importProjectSelect').value;
            const fileInput = document.getElementById('importFile');
            const file = fileInput.files[0];
            
            if (!projectId) {
                showAlert('è¯·é€‰æ‹©é¡¹ç›®', 'danger');
                return;
            }
            
            if (!file) {
                showAlert('è¯·é€‰æ‹©å¯¼å…¥æ–‡ä»¶', 'danger');
                return;
            }
            
            // æ£€æŸ¥æ–‡ä»¶æ ¼å¼
            const fileExtension = file.name.split('.').pop().toLowerCase();
            if (!['csv', 'json', 'xls', 'xlsx'].includes(fileExtension)) {
                showAlert('ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ï¼Œè¯·ä½¿ç”¨CSVã€JSONã€XLSæˆ–XLSXæ ¼å¼', 'danger');
                return;
            }
            
            // æ˜¾ç¤ºè¿›åº¦æ¡
            document.getElementById('importProgress').style.display = 'block';
            document.getElementById('importResults').style.display = 'none';
            updateImportProgress(0, 'æ­£åœ¨ä¸Šä¼ æ–‡ä»¶...');
            
            try {
                // ä½¿ç”¨FormDataä¸Šä¼ æ–‡ä»¶
                const formData = new FormData();
                formData.append('file', file);
                formData.append('project_id', projectId);
                
                updateImportProgress(30, 'æ­£åœ¨è§£ææ–‡ä»¶...');
                
                const response = await fetch('/api/test-cases/import', {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.json();
                updateImportProgress(100, 'å¯¼å…¥å®Œæˆ');
                
                if (result.success) {
                    showImportResults(result.data);
                    loadTestCases(); // åˆ·æ–°æµ‹è¯•ç”¨ä¾‹åˆ—è¡¨
                    closeModal('importTestCasesModal');
                    document.getElementById('importTestCasesForm').reset();
                } else {
                    showAlert(result.error || 'å¯¼å…¥å¤±è´¥', 'danger');
                }
            } catch (error) {
                console.error('å¯¼å…¥å¤±è´¥:', error);
                showAlert('å¯¼å…¥å¤±è´¥: ' + error.message, 'danger');
                document.getElementById('importProgress').style.display = 'none';
            }
        }

        // è§£æå¯¼å…¥æ–‡ä»¶
        async function parseImportFile(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const content = e.target.result;
                        let testCases = [];
                        
                        if (file.name.toLowerCase().endsWith('.json')) {
                            testCases = JSON.parse(content);
                        } else if (file.name.toLowerCase().endsWith('.csv')) {
                            testCases = parseCSV(content);
                        } else {
                            throw new Error('ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼');
                        }
                        
                        // éªŒè¯æ•°æ®æ ¼å¼
                        if (!Array.isArray(testCases)) {
                            throw new Error('æ–‡ä»¶æ ¼å¼é”™è¯¯ï¼šåº”è¯¥æ˜¯æµ‹è¯•ç”¨ä¾‹æ•°ç»„');
                        }
                        
                        // éªŒè¯å¿…å¡«å­—æ®µ
                        testCases.forEach((testCase, index) => {
                            if (!testCase.title) {
                                throw new Error(`ç¬¬ ${index + 1} è¡Œï¼šç¼ºå°‘æ ‡é¢˜`);
                            }
                            if (!testCase.type) {
                                testCase.type = 'functional';
                            }
                            if (!testCase.priority) {
                                testCase.priority = 'medium';
                            }
                        });
                        
                        resolve(testCases);
                    } catch (error) {
                        reject(error);
                    }
                };
                reader.onerror = function() {
                    reject(new Error('æ–‡ä»¶è¯»å–å¤±è´¥'));
                };
                reader.readAsText(file, 'utf-8');
            });
        }

        // è§£æCSVæ–‡ä»¶
        function parseCSV(csvContent) {
            const lines = csvContent.split('\n').filter(line => line.trim());
            if (lines.length < 2) {
                throw new Error('CSVæ–‡ä»¶æ ¼å¼é”™è¯¯ï¼šè‡³å°‘éœ€è¦æ ‡é¢˜è¡Œå’Œä¸€è¡Œæ•°æ®');
            }
            
            const headers = lines[0].split(',').map(h => h.trim().replace(/"/g, ''));
            const testCases = [];
            
            for (let i = 1; i < lines.length; i++) {
                const values = parseCSVLine(lines[i]);
                if (values.length !== headers.length) {
                    console.warn(`ç¬¬ ${i + 1} è¡Œåˆ—æ•°ä¸åŒ¹é…ï¼Œè·³è¿‡`);
                    continue;
                }
                
                const testCase = {};
                headers.forEach((header, index) => {
                    let value = values[index];
                    
                    // å¤„ç†ç‰¹æ®Šå­—æ®µ
                    if (header === 'preconditions' || header === 'test_steps') {
                        if (typeof value === 'string') {
                            testCase[header] = value.split('\\n').filter(item => item.trim());
                        } else {
                            testCase[header] = [];
                        }
                    } else {
                        testCase[header] = value;
                    }
                });
                
                testCases.push(testCase);
            }
            
            return testCases;
        }

        // è§£æCSVè¡Œï¼ˆå¤„ç†å¼•å·å†…çš„é€—å·ï¼‰
        function parseCSVLine(line) {
            const result = [];
            let current = '';
            let inQuotes = false;
            
            for (let i = 0; i < line.length; i++) {
                const char = line[i];
                
                if (char === '"') {
                    inQuotes = !inQuotes;
                } else if (char === ',' && !inQuotes) {
                    result.push(current.trim());
                    current = '';
                } else {
                    current += char;
                }
            }
            
            result.push(current.trim());
            return result;
        }

        // æ›´æ–°å¯¼å…¥è¿›åº¦
        function updateImportProgress(percentage, status) {
            document.getElementById('importProgressBar').style.width = percentage + '%';
            document.getElementById('importStatus').textContent = status;
        }

        // æ˜¾ç¤ºå¯¼å…¥ç»“æœ
        function showImportResults(data) {
            const resultsDiv = document.getElementById('importResults');
            const contentDiv = document.getElementById('importResultsContent');
            
            let html = `
                <div class="alert alert-success">
                    <strong>å¯¼å…¥å®Œæˆï¼</strong>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">${data.imported || 0}</div>
                        <div class="stat-label">æˆåŠŸå¯¼å…¥</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${data.duplicates || 0}</div>
                        <div class="stat-label">é‡å¤è·³è¿‡</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${data.errors || 0}</div>
                        <div class="stat-label">å¯¼å…¥å¤±è´¥</div>
                    </div>
                </div>
            `;
            
            if (data.errors && data.errors.length > 0) {
                html += `
                    <h5>é”™è¯¯è¯¦æƒ…ï¼š</h5>
                    <div class="alert alert-warning">
                        <ul>
                            ${data.errors.map(error => `<li>ç¬¬ ${error.index + 1} è¡Œ: ${error.error}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }
            
            if (data.duplicateDetails && data.duplicateDetails.length > 0) {
                html += `
                    <h5>é‡å¤ç”¨ä¾‹ï¼š</h5>
                    <div class="alert alert-info">
                        <ul>
                            ${data.duplicateDetails.map(dup => `<li>${dup.title}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }
            
            contentDiv.innerHTML = html;
            resultsDiv.style.display = 'block';
        }

        // æ˜¾ç¤ºè­¦å‘Šæ¶ˆæ¯
        function showAlert(message, type) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.textContent = message;
            
            // æ’å…¥åˆ°é¡µé¢é¡¶éƒ¨
            const container = document.querySelector('.container');
            container.insertBefore(alertDiv, container.firstChild);
            
            // 3ç§’åè‡ªåŠ¨ç§»é™¤
            setTimeout(() => {
                alertDiv.remove();
            }, 3000);
        }

        // è¾…åŠ©å‡½æ•°
        function getTypeDisplayName(type) {
            const types = {
                'functional': 'åŠŸèƒ½æµ‹è¯•',
                'performance': 'æ€§èƒ½æµ‹è¯•',
                'security': 'å®‰å…¨æµ‹è¯•',
                'ui': 'ç•Œé¢æµ‹è¯•'
            };
            return types[type] || type;
        }

        function getPriorityDisplayName(priority) {
            const priorities = {
                'high': 'é«˜',
                'medium': 'ä¸­',
                'low': 'ä½'
            };
            return priorities[priority] || priority;
        }

        function getStatusDisplayName(status) {
            const statuses = {
                'pending': 'å¾…æ‰§è¡Œ',
                'passed': 'é€šè¿‡',
                'failed': 'å¤±è´¥',
                'blocked': 'é˜»å¡'
            };
            return statuses[status] || status;
        }

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­æ¨¡æ€æ¡†
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        }
    </script>
</body>
</html>